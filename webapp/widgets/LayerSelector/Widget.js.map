{"version":3,"sources":["../../../widgets/LayerSelector/Widget.js"],"names":["declare","BaseWidget","LayerSelector","aspect","topic","mainWidget","postCreate","console","log","config","applyFactories","map","startup","window","URLParams","basemap","radioButtons","domNode","querySelectorAll","length","click","after","onChange","bind","layerItem","arguments","get","layerType","publish","name"],"mappings":"QAAoB,oB,EACG,iB,EACG,gC,EACK,a,EACZ,a,EACD,Y,aALXA,O,EACAC,U,EACAC,a,cAEAC,M,EACAC,K;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SAGQJ,OAAO,CAAC,CAACC,UAAD,CAAD,EAAe;AACnCI,IAAAA,UAAU,EAAE,IADuB;AAGnCC,IAAAA,UAHmC,wBAGtB;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AAEA,WAAKC,MAAL,GAAcC,cAAc,CAAC,KAAKD,MAAN,CAA5B;AAEA,WAAKJ,UAAL,GAAkB,IAAIH,aAAJ,mBACb,KAAKO,MADQ;AAEhBE,QAAAA,GAAG,EAAE,KAAKA;AAFM,SAAlB;AAIA,WAAKN,UAAL,CAAgBO,OAAhB;;AAEA,UAAIC,MAAM,CAACC,SAAP,IAAoBD,MAAM,CAACC,SAAP,CAAiBC,OAAzC,EAAkD;AAChD,YAAMC,YAAY,GAAG,KAAKX,UAAL,CAAgBY,OAAhB,CAAwBC,gBAAxB,wBAAyDL,MAAM,CAACC,SAAP,CAAiBC,OAA1E,QAArB;;AACA,YAAIC,YAAY,CAACG,MAAb,KAAwB,CAA5B,EAA+B;AAC7BH,UAAAA,YAAY,CAAC,CAAD,CAAZ,CAAgBI,KAAhB;AACD;AACF;;AAEDjB,MAAAA,MAAM,CAACkB,KAAP,CAAa,KAAKhB,UAAlB,EAA8B,YAA9B,EAA4C,KAAKiB,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAA5C,EAAsE,IAAtE;AACD,KAtBkC;AAwBnCD,IAAAA,QAxBmC,oBAwB1BE,SAxB0B,EAwBf;AAClBjB,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCiB,SAAtC;;AAEA,UAAID,SAAS,CAACE,GAAV,CAAc,UAAd,KAA6BF,SAAS,CAACG,SAAV,KAAwB,WAAzD,EAAsE;AACpEvB,QAAAA,KAAK,CAACwB,OAAN,CAAc,qCAAd,EAAqDJ,SAAS,CAACK,IAA/D;AACD;AACF;AA9BkC,GAAf,C","sourcesContent":["import declare from 'dojo/_base/declare';\r\nimport BaseWidget from 'jimu/BaseWidget';\r\nimport LayerSelector from './layer-selector/LayerSelector';\r\nimport { applyFactories } from './utilities';\r\nimport aspect from 'dojo/aspect';\r\nimport topic from 'dojo/topic';\r\n\r\n\r\nexport default declare([BaseWidget], {\r\n  mainWidget: null,\r\n\r\n  postCreate() {\r\n    console.log('LayerSelector:postCreate');\r\n\r\n    this.config = applyFactories(this.config);\r\n\r\n    this.mainWidget = new LayerSelector({\r\n      ...this.config,\r\n      map: this.map\r\n    });\r\n    this.mainWidget.startup();\r\n\r\n    if (window.URLParams && window.URLParams.basemap) {\r\n      const radioButtons = this.mainWidget.domNode.querySelectorAll(`input[value='${window.URLParams.basemap}']`);\r\n      if (radioButtons.length === 1) {\r\n        radioButtons[0].click();\r\n      }\r\n    }\r\n\r\n    aspect.after(this.mainWidget, '_updateMap', this.onChange.bind(this), true);\r\n  },\r\n\r\n  onChange(layerItem) {\r\n    console.log('LayerSelector:onChange', arguments);\r\n\r\n    if (layerItem.get('selected') && layerItem.layerType === 'baselayer') {\r\n      topic.publish('url-params-on-layer-selector-change', layerItem.name);\r\n    }\r\n  }\r\n});\r\n"],"file":"Widget.js"}